<!Doctype html>
<html lang="en-US">

<head>
	<meta charset="utf-8">
	<title>HTML tester</title>
	<link rel="stylesheet" type="text/css"	href="style2.css"> 
</head>

<body>
	<button onclick="getWeather(location)">Get Weather</button>
	<input type="number" id="locationZip" placeholder="Enter zip">
	<div id="displayWeather">Current Weather

<script src="https://code.jquery.com/jquery-2.2.1.min.js"
        integrity="sha256-gvQgAFzTH6trSrAWoH1iPo9Xc96QxSZ3feW6kem+O00="
        crossorigin="anonymous">
</script>
<script>
/*$( document ).ready(function() {
	alert("welcome");
	}); */

function getWeather() {
  //var weather = $.post("http://api.openweathermap.org/data/2.5/weather?q=zip=77040,us&units=imperial&appid=2fa98ce6e15178b88df94c669226e90c");

  	var locationZip = document.getElementById('locationZip');

	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
		if (xhttp.readyState ==4 && xhttp.status ==200) {
			var weather = JSON.parse(xhttp.responseText);
			var tempObject = weather.main;
			var windObject = weather.wind;
			var cloudsObject = weather.clouds;
			var temp = tempObject.temp;
			var humidity = tempObject.humidity;
			var wind = windObject.speed;
			var clouds = cloudsObject.all;
			console.log(locationZip.value);
			console.log(temp);
			console.log(xhttp);
			displayWeather(temp, humidity, wind, clouds);
		}
	};
	if (locationZip.value === "") {
	var weatherDisplay = document.getElementById('displayWeather');

	weatherDisplay.innerHTML = "";
	weatherDisplay.appendChild(document.createElement('p'));
	weatherDisplay.appendChild(document.createTextNode("Please enter Zip code"));
	}	else {
	xhttp.open("Get", "http://api.openweathermap.org/data/2.5/weather?q=zip=" + locationZip.value + ",us&units=imperial&appid=2fa98ce6e15178b88df94c669226e90c", true);
	xhttp.send();
	}
};

function displayWeather(temp, humidity, wind, clouds) {
	var weatherDisplay = document.getElementById('displayWeather');

	weatherDisplay.innerHTML = "";
	weatherDisplay.appendChild(document.createElement('p'));
	weatherDisplay.appendChild(document.createTextNode("Current Temperature " + temp + " degrees"));
	weatherDisplay.appendChild(document.createElement('p'));
	weatherDisplay.appendChild(document.createTextNode("Humidity " + humidity + "%"));
	weatherDisplay.appendChild(document.createElement('p'));
	weatherDisplay.appendChild(document.createTextNode("Wind " + wind + "mph"));
	weatherDisplay.appendChild(document.createElement('p'));
	weatherDisplay.appendChild(document.createTextNode("Clouds " + clouds + "%"));
};

</script>

</body>

</html>
